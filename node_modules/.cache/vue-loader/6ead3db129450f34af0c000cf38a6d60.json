{"remainingRequest":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hicham/Documents/travaux/web/vuejs/myapp/src/views/panier.vue?vue&type=style&index=0&id=8701719a&scoped=true&lang=css&","dependencies":[{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/src/views/panier.vue","mtime":1572529255000},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/css-loader/dist/cjs.js","mtime":1572430522391},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1572430522524},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/postcss-loader/src/index.js","mtime":1572430522495},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/cache-loader/dist/cjs.js","mtime":1572430522302},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/vue-loader/lib/index.js","mtime":1572430522524}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojc2VsZWN0aW9uIHsKCWRpc3BsYXk6IGlubGluZTsKCXdpZHRoOiAxMDAlOwp9Cgo="},{"version":3,"sources":["panier.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA","file":"panier.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div>\n\t\t<b-jumbotron>\n\t\t\t<template v-slot:header>Votre sélection</template>\n\t\t\t<template v-slot:lead>\n\t\t\t\t<b-container class=\"bv-example-row\">\n\t\t\t\t\t<b-row v-for=\"index in nb_choix\" :key=\"index\">\n\t\t\t\t\t\t<b-col>{{title[index-1]}}</b-col>\n\t\t\t\t\t\t<b-col>{{prix[index-1]}}€</b-col>\n\n\t\t\t\t\t</b-row>\n\t\t\t\t\t<b-row>\n\t\t\t\t\t\t<b-col><strong>Total sans remise:</strong></b-col>\n\t\t\t\t\t\t<b-col><strong>{{total}} €</strong></b-col>\n\t\t\t\t\t</b-row>\n\t\t\t\t\t<b-row>\n\t\t\t\t\t\t<b-col><strong>Total avec remise:</strong></b-col>\n\t\t\t\t\t\t<b-col><strong>{{bestPrice}} €</strong></b-col>\n\t\t\t\t\t</b-row>\n\t\t\t\t</b-container>\n\t\t\t\t<!--\n\t\t\t\t<div id=\"selection\">\n\t\t\t\t\t<div v-for=\"t in ischoices.titre\" :key=\"t.title\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<div v-for=\"t in ischoices.prix\" :key=\"t.title\">\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n-->\n\t\t\t</template>\n\n\t\t\t<b-button variant=\"primary\" @click.prevent=\"prev()\">Revenir en arrière</b-button>\n\t\t\t<b-button variant=\"success\" @click.prevent=\"paniervalid()\">Validez le panier</b-button>\n\t\t</b-jumbotron>\n\n\t</div>\n</template>\n<script>\n\timport axios from \"axios\";\n\texport default {\n\n\t\tname: \"panier\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttitle: \"\",\n\t\t\t\tprix: \"\",\n\t\t\t\toffre: \"\",\n\t\t\t\toffreCom: \"\",\n\t\t\t\ttotal: \"\",\n\t\t\t\tprixRemise: \"\",\n\t\t\t\tprixFinal: \"\",\n\t\t\t\tnb_choix: \"\",\n\t\t\t\tcomparePrice:[],\n\t\t\t\tbestPrice:\"\"\n\t\t\t};\n\t\t},\n\t\tmounted() {\n\t\t\tthis.updateData(this.$route.params.payload);\n\t\t\taxios.get(\"http://henri-potier.xebia.fr/books/\" + this.$route.params.payload.choices.offre + \"/commercialOffers\")\n\t\t\t\t.then(response => {\n\t\t\t\t\tthis.offreCom = response.data;\n\t\t\t\t\tfor (var i = 0; i < this.offreCom.offers.length; i++) {\n\t\t\t\t\t\tif (this.offreCom.offers[i].type == \"percentage\") {\n\t\t\t\t\t\t\tthis.prixRemise = this.offreCom.offers[i].value;\n\t\t\t\t\t\t\tthis.prixFinal = this.total - (this.total * this.prixRemise / 100);\n\t\t\t\t\t\t\tthis.comparePrice.push(this.prixFinal);\n\t\t\t\t\t\t\tconsole.log(this.comparePrice)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.offreCom.offers[i].type == \"minus\") {\n\t\t\t\t\t\t\tthis.prixRemise = this.offreCom.offers[i].value;\n\t\t\t\t\t\t\tthis.prixFinal = this.total - (this.total * this.prixRemise / 100);\n\t\t\t\t\t\t\tthis.comparePrice.push(this.prixFinal);\n\t\t\t\t\t\t\tconsole.log(this.comparePrice)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.offreCom.offers[i].type == \"slice\") {\n\t\t\t\t\t\t\tthis.prixRemise = this.offreCom.offers[i].sliceValue;\n\t\t\t\t\t\t\tif(this.total>this.prixRemise){\n\t\t\t\t\t\t\t\tthis.prixFinal=this.total-this.offreCom.offers[i].value;\n\t\t\t\t\t\t\t\tthis.comparePrice.push(this.prixFinal);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.bestPrice=Array.min(this.comparePrice);\n\t\t\t\t\t}\n\n\n\t\t\t\t});\n\t\t\tArray.min = function(array) {\n\t\t\t\treturn Math.min.apply(Math, array);\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tprev() {\n\t\t\t\tthis.$router.replace({\n\t\t\t\t\tname: \"secure\"\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdateData(p) {\n\t\t\t\tthis.nb_choix = p.choices.titre.length;\n\t\t\t\tthis.title = Object.assign({}, p.choices.titre);\n\t\t\t\tthis.prix = Object.assign({}, p.choices.prix);\n\t\t\t\tconst sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\n\t\t\t\tthis.total = sumValues(this.prix);\n\t\t\t\tthis.offre = Object.assign({}, p.choices.offre);\n\n\t\t\t},\n\t\t\tpaniervalid() {\n\t\t\t\tconsole.log(this.ischoices);\n\t\t\t}\n\t\t}\n\t};\n\n</script>\n<style scoped>\n\t#selection {\n\t\tdisplay: inline;\n\t\twidth: 100%;\n\t}\n\n</style>\n"]}]}