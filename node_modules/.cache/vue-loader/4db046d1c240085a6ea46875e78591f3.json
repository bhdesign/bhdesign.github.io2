{"remainingRequest":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hicham/Documents/travaux/web/vuejs/myapp/src/views/panier.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/src/views/panier.vue","mtime":1572529255000},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/babel-loader/lib/index.js","mtime":1572430518705},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/cache-loader/dist/cjs.js","mtime":1572430522302},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/vue-loader/lib/index.js","mtime":1572430522524}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKCgluYW1lOiAicGFuaWVyIiwKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJdGl0bGU6ICIiLAoJCQlwcml4OiAiIiwKCQkJb2ZmcmU6ICIiLAoJCQlvZmZyZUNvbTogIiIsCgkJCXRvdGFsOiAiIiwKCQkJcHJpeFJlbWlzZTogIiIsCgkJCXByaXhGaW5hbDogIiIsCgkJCW5iX2Nob2l4OiAiIiwKCQkJY29tcGFyZVByaWNlOltdLAoJCQliZXN0UHJpY2U6IiIKCQl9OwoJfSwKCW1vdW50ZWQoKSB7CgkJdGhpcy51cGRhdGVEYXRhKHRoaXMuJHJvdXRlLnBhcmFtcy5wYXlsb2FkKTsKCQlheGlvcy5nZXQoImh0dHA6Ly9oZW5yaS1wb3RpZXIueGViaWEuZnIvYm9va3MvIiArIHRoaXMuJHJvdXRlLnBhcmFtcy5wYXlsb2FkLmNob2ljZXMub2ZmcmUgKyAiL2NvbW1lcmNpYWxPZmZlcnMiKQoJCQkudGhlbihyZXNwb25zZSA9PiB7CgkJCQl0aGlzLm9mZnJlQ29tID0gcmVzcG9uc2UuZGF0YTsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vZmZyZUNvbS5vZmZlcnMubGVuZ3RoOyBpKyspIHsKCQkJCQlpZiAodGhpcy5vZmZyZUNvbS5vZmZlcnNbaV0udHlwZSA9PSAicGVyY2VudGFnZSIpIHsKCQkJCQkJdGhpcy5wcml4UmVtaXNlID0gdGhpcy5vZmZyZUNvbS5vZmZlcnNbaV0udmFsdWU7CgkJCQkJCXRoaXMucHJpeEZpbmFsID0gdGhpcy50b3RhbCAtICh0aGlzLnRvdGFsICogdGhpcy5wcml4UmVtaXNlIC8gMTAwKTsKCQkJCQkJdGhpcy5jb21wYXJlUHJpY2UucHVzaCh0aGlzLnByaXhGaW5hbCk7CgkJCQkJCWNvbnNvbGUubG9nKHRoaXMuY29tcGFyZVByaWNlKQoJCQkJCX0KCQkJCQlpZiAodGhpcy5vZmZyZUNvbS5vZmZlcnNbaV0udHlwZSA9PSAibWludXMiKSB7CgkJCQkJCXRoaXMucHJpeFJlbWlzZSA9IHRoaXMub2ZmcmVDb20ub2ZmZXJzW2ldLnZhbHVlOwoJCQkJCQl0aGlzLnByaXhGaW5hbCA9IHRoaXMudG90YWwgLSAodGhpcy50b3RhbCAqIHRoaXMucHJpeFJlbWlzZSAvIDEwMCk7CgkJCQkJCXRoaXMuY29tcGFyZVByaWNlLnB1c2godGhpcy5wcml4RmluYWwpOwoJCQkJCQljb25zb2xlLmxvZyh0aGlzLmNvbXBhcmVQcmljZSkKCQkJCQl9CgkJCQkJaWYgKHRoaXMub2ZmcmVDb20ub2ZmZXJzW2ldLnR5cGUgPT0gInNsaWNlIikgewoJCQkJCQl0aGlzLnByaXhSZW1pc2UgPSB0aGlzLm9mZnJlQ29tLm9mZmVyc1tpXS5zbGljZVZhbHVlOwoJCQkJCQlpZih0aGlzLnRvdGFsPnRoaXMucHJpeFJlbWlzZSl7CgkJCQkJCQl0aGlzLnByaXhGaW5hbD10aGlzLnRvdGFsLXRoaXMub2ZmcmVDb20ub2ZmZXJzW2ldLnZhbHVlOwoJCQkJCQkJdGhpcy5jb21wYXJlUHJpY2UucHVzaCh0aGlzLnByaXhGaW5hbCk7CgkJCQkJCX0KCgkJCQkJfQoJCQkJCXRoaXMuYmVzdFByaWNlPUFycmF5Lm1pbih0aGlzLmNvbXBhcmVQcmljZSk7CgkJCQl9CgoKCQkJfSk7CgkJQXJyYXkubWluID0gZnVuY3Rpb24oYXJyYXkpIHsKCQkJcmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsIGFycmF5KTsKCQl9OwoJfSwKCW1ldGhvZHM6IHsKCQlwcmV2KCkgewoJCQl0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CgkJCQluYW1lOiAic2VjdXJlIgoJCQl9KTsKCQl9LAoJCXVwZGF0ZURhdGEocCkgewoJCQl0aGlzLm5iX2Nob2l4ID0gcC5jaG9pY2VzLnRpdHJlLmxlbmd0aDsKCQkJdGhpcy50aXRsZSA9IE9iamVjdC5hc3NpZ24oe30sIHAuY2hvaWNlcy50aXRyZSk7CgkJCXRoaXMucHJpeCA9IE9iamVjdC5hc3NpZ24oe30sIHAuY2hvaWNlcy5wcml4KTsKCQkJY29uc3Qgc3VtVmFsdWVzID0gb2JqID0+IE9iamVjdC52YWx1ZXMob2JqKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKTsKCQkJdGhpcy50b3RhbCA9IHN1bVZhbHVlcyh0aGlzLnByaXgpOwoJCQl0aGlzLm9mZnJlID0gT2JqZWN0LmFzc2lnbih7fSwgcC5jaG9pY2VzLm9mZnJlKTsKCgkJfSwKCQlwYW5pZXJ2YWxpZCgpIHsKCQkJY29uc29sZS5sb2codGhpcy5pc2Nob2ljZXMpOwoJCX0KCX0KfTsKCg=="},{"version":3,"sources":["panier.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"panier.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div>\n\t\t<b-jumbotron>\n\t\t\t<template v-slot:header>Votre sélection</template>\n\t\t\t<template v-slot:lead>\n\t\t\t\t<b-container class=\"bv-example-row\">\n\t\t\t\t\t<b-row v-for=\"index in nb_choix\" :key=\"index\">\n\t\t\t\t\t\t<b-col>{{title[index-1]}}</b-col>\n\t\t\t\t\t\t<b-col>{{prix[index-1]}}€</b-col>\n\n\t\t\t\t\t</b-row>\n\t\t\t\t\t<b-row>\n\t\t\t\t\t\t<b-col><strong>Total sans remise:</strong></b-col>\n\t\t\t\t\t\t<b-col><strong>{{total}} €</strong></b-col>\n\t\t\t\t\t</b-row>\n\t\t\t\t\t<b-row>\n\t\t\t\t\t\t<b-col><strong>Total avec remise:</strong></b-col>\n\t\t\t\t\t\t<b-col><strong>{{bestPrice}} €</strong></b-col>\n\t\t\t\t\t</b-row>\n\t\t\t\t</b-container>\n\t\t\t\t<!--\n\t\t\t\t<div id=\"selection\">\n\t\t\t\t\t<div v-for=\"t in ischoices.titre\" :key=\"t.title\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<div v-for=\"t in ischoices.prix\" :key=\"t.title\">\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n-->\n\t\t\t</template>\n\n\t\t\t<b-button variant=\"primary\" @click.prevent=\"prev()\">Revenir en arrière</b-button>\n\t\t\t<b-button variant=\"success\" @click.prevent=\"paniervalid()\">Validez le panier</b-button>\n\t\t</b-jumbotron>\n\n\t</div>\n</template>\n<script>\n\timport axios from \"axios\";\n\texport default {\n\n\t\tname: \"panier\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttitle: \"\",\n\t\t\t\tprix: \"\",\n\t\t\t\toffre: \"\",\n\t\t\t\toffreCom: \"\",\n\t\t\t\ttotal: \"\",\n\t\t\t\tprixRemise: \"\",\n\t\t\t\tprixFinal: \"\",\n\t\t\t\tnb_choix: \"\",\n\t\t\t\tcomparePrice:[],\n\t\t\t\tbestPrice:\"\"\n\t\t\t};\n\t\t},\n\t\tmounted() {\n\t\t\tthis.updateData(this.$route.params.payload);\n\t\t\taxios.get(\"http://henri-potier.xebia.fr/books/\" + this.$route.params.payload.choices.offre + \"/commercialOffers\")\n\t\t\t\t.then(response => {\n\t\t\t\t\tthis.offreCom = response.data;\n\t\t\t\t\tfor (var i = 0; i < this.offreCom.offers.length; i++) {\n\t\t\t\t\t\tif (this.offreCom.offers[i].type == \"percentage\") {\n\t\t\t\t\t\t\tthis.prixRemise = this.offreCom.offers[i].value;\n\t\t\t\t\t\t\tthis.prixFinal = this.total - (this.total * this.prixRemise / 100);\n\t\t\t\t\t\t\tthis.comparePrice.push(this.prixFinal);\n\t\t\t\t\t\t\tconsole.log(this.comparePrice)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.offreCom.offers[i].type == \"minus\") {\n\t\t\t\t\t\t\tthis.prixRemise = this.offreCom.offers[i].value;\n\t\t\t\t\t\t\tthis.prixFinal = this.total - (this.total * this.prixRemise / 100);\n\t\t\t\t\t\t\tthis.comparePrice.push(this.prixFinal);\n\t\t\t\t\t\t\tconsole.log(this.comparePrice)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.offreCom.offers[i].type == \"slice\") {\n\t\t\t\t\t\t\tthis.prixRemise = this.offreCom.offers[i].sliceValue;\n\t\t\t\t\t\t\tif(this.total>this.prixRemise){\n\t\t\t\t\t\t\t\tthis.prixFinal=this.total-this.offreCom.offers[i].value;\n\t\t\t\t\t\t\t\tthis.comparePrice.push(this.prixFinal);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.bestPrice=Array.min(this.comparePrice);\n\t\t\t\t\t}\n\n\n\t\t\t\t});\n\t\t\tArray.min = function(array) {\n\t\t\t\treturn Math.min.apply(Math, array);\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tprev() {\n\t\t\t\tthis.$router.replace({\n\t\t\t\t\tname: \"secure\"\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdateData(p) {\n\t\t\t\tthis.nb_choix = p.choices.titre.length;\n\t\t\t\tthis.title = Object.assign({}, p.choices.titre);\n\t\t\t\tthis.prix = Object.assign({}, p.choices.prix);\n\t\t\t\tconst sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\n\t\t\t\tthis.total = sumValues(this.prix);\n\t\t\t\tthis.offre = Object.assign({}, p.choices.offre);\n\n\t\t\t},\n\t\t\tpaniervalid() {\n\t\t\t\tconsole.log(this.ischoices);\n\t\t\t}\n\t\t}\n\t};\n\n</script>\n<style scoped>\n\t#selection {\n\t\tdisplay: inline;\n\t\twidth: 100%;\n\t}\n\n</style>\n"]}]}