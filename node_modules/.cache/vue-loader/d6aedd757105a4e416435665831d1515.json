{"remainingRequest":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hicham/Documents/travaux/web/vuejs/myapp/src/views/secure.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/src/views/secure.vue","mtime":1572710930952},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/cache-loader/dist/cjs.js","mtime":1572430522302},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/babel-loader/lib/index.js","mtime":1572430518705},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/cache-loader/dist/cjs.js","mtime":1572430522302},{"path":"/Users/hicham/Documents/travaux/web/vuejs/myapp/node_modules/vue-loader/lib/index.js","mtime":1572430522524}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBWQ2xhbXAgZnJvbSAndnVlLWNsYW1wJzsKLy8gIGltcG9ydCB7Ci8vICAgIEV2ZW50QnVzCi8vICB9IGZyb20gIkAvZXZlbnRidXMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNlY3VyZSIsCiAgY29tcG9uZW50czogewogICAgVkNsYW1wCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm9va3M6IHt9LAogICAgICByZW1pc2VzOiBbXSwKICAgICAgbGl2cmVzOiBbXSwKICAgICAgbWVzcHJpeDogW10sCiAgICAgIGl0ZW1zOiAwLAogICAgICBzZWVuOiBmYWxzZQoKCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIGF4aW9zLmdldCgiaHR0cDovL2hlbnJpLXBvdGllci54ZWJpYS5mci9ib29rcyIpCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmJvb2tzID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgIH0pCiAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciIgKyBlcnIpCiAgICAgIH0pCiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja2Jvb2tzKHQsIHAsIGksIGUpIHsKICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblswXS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIgogICAgICBlLnRhcmdldC5kaXNhYmxlZCA9IHRydWU7CiAgICAgIHRoaXMuaXRlbXMrKzsKICAgICAgdGhpcy5yZW1pc2VzLnB1c2goaSk7CiAgICAgIHRoaXMubWVzcHJpeC5wdXNoKHApOwogICAgICB0aGlzLmxpdnJlcy5wdXNoKHQpOwoKCiAgICB9LAogICAgbW9ucGFuaWVyKCkgewogICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgIGNob2ljZXM6IHsKICAgICAgICAgIHRpdHJlOiB0aGlzLmxpdnJlcywKICAgICAgICAgIHByaXg6IHRoaXMubWVzcHJpeCwKICAgICAgICAgIG9mZnJlOiB0aGlzLnJlbWlzZXMKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBuYW1lOiAicGFuaWVyIiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBheWxvYWQKICAgICAgICB9CiAgICAgIH0pOwoKICAgIH0sCiAgICBzZWFyY2hUaXRsZShlKSB7CiAgICAgIGNvbnN0IG15c2VhcmNoID0gZS50YXJnZXQucHJldmlvdXNTaWJsaW5nLnZhbHVlOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYm9va3MubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmJvb2tzW2ldKQogICAgICAgIGlmICghdGhpcy5ib29rc1tpXS50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG15c2VhcmNoLnRvTG93ZXJDYXNlKCkpKSB7CiAgICAgICAgICB0aGlzLnNlZW4gPSB0cnVlOwogICAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykuY2hpbGRyZW4pW2krMV0uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB9CgogICAgICB9CgogICAgfSwKICAgIHJlc2V0U2VhcmNoKCkgewogICAgICB0aGlzLnNlZW4gPSBmYWxzZTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJvb2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykuY2hpbGRyZW4pW2ldLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsKICAgICAgfQogICAgfQoKICB9Cgp9OwoK"},{"version":3,"sources":["secure.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"secure.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"secure\">\n    <h1>Bienvenue dans votre librairie</h1>\n    <p>\n      Notre sélection\n    </p>\n    <b-navbar toggleable=\"lg\" type=\"dark\" variant=\"info\">\n      <b-navbar-brand href=\"#\">Menu</b-navbar-brand>\n\n      <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\n\n      <b-collapse id=\"nav-collapse\" is-nav>\n        <b-navbar-nav>\n          <b-nav-item href=\"#\" disabled>Selection</b-nav-item>\n          <b-nav-item @click.prevent=\"monpanier()\">Panier <strong style=\"color:white;\">{{items}}</strong></b-nav-item>\n        </b-navbar-nav>\n\n        <!-- Right aligned nav items -->\n        <b-navbar-nav class=\"ml-auto\">\n          <b-nav-form>\n            <b-form-input size=\"sm\" class=\"mr-sm-2\" v-model=\"search\" placeholder=\"titre..\"></b-form-input>\n            <b-button @click.prevent=\"searchTitle($event)\" size=\"sm\" class=\"my-2 my-sm-0\" type=\"submit\">Chercher</b-button>\n          </b-nav-form>\n\n\n\n          <b-nav-item-dropdown right>\n            <!-- Using 'button-content' slot -->\n            <template v-slot:button-content>\n              <em>User</em>\n            </template>\n            <b-dropdown-item href=\"#\">Profile</b-dropdown-item>\n            <b-dropdown-item href=\"#\">Sign Out</b-dropdown-item>\n          </b-nav-item-dropdown>\n        </b-navbar-nav>\n      </b-collapse>\n    </b-navbar>\n    <div class=\"container\">\n      <div v-show=\"seen\">\n        <b-button @click.prevent=\"resetSearch()\">Effacer la recherche</b-button>\n      </div>\n      <b-card v-for=\"todo in books\" :key=\"todo.title\" img-alt=\"Image\" img-top tag=\"article\" class=\"card\">\n        <div class=\"selected\">\n          <p>Ajouté au panier</p>\n        </div>\n        <b-card-title>{{todo.title}}</b-card-title>\n        <b-badge class=\"price\">{{todo.price+\"€\"}}</b-badge>\n        <img :src=todo.cover alt=\"Harry\" bottom>\n        <div class=\"synopsis\"><strong>Résumé</strong>\n          <b-card-text>\n            <v-clamp class=\"resume\" autoresize :max-lines=\"5\">{{ todo.synopsis }}</v-clamp>\n          </b-card-text>\n        </div>\n        <b-button :disabled=false @click.prevent=\"checkbooks(todo.title,todo.price,todo.isbn,$event)\" variant=\"primary\">Ajouter</b-button>\n      </b-card>\n    </div>\n  </div>\n\n</template>\n\n<script>\n  import axios from \"axios\";\n  import VClamp from 'vue-clamp';\n  //  import {\n  //    EventBus\n  //  } from \"@/eventbus.js\";\n  export default {\n    name: \"Secure\",\n    components: {\n      VClamp\n    },\n    data() {\n      return {\n        books: {},\n        remises: [],\n        livres: [],\n        mesprix: [],\n        items: 0,\n        seen: false\n\n\n      };\n    },\n    mounted() {\n      axios.get(\"http://henri-potier.xebia.fr/books\")\n        .then(response => {\n          this.books = response.data;\n\n        })\n        .catch(err => {\n          console.log(\"error\" + err)\n        })\n    },\n    methods: {\n      checkbooks(t, p, i, e) {\n        e.target.parentNode.children[0].style.display = \"block\"\n        e.target.disabled = true;\n        this.items++;\n        this.remises.push(i);\n        this.mesprix.push(p);\n        this.livres.push(t);\n\n\n      },\n      monpanier() {\n        const payload = {\n          choices: {\n            titre: this.livres,\n            prix: this.mesprix,\n            offre: this.remises\n          }\n        }\n\n        this.$router.replace({\n          name: \"panier\",\n          params: {\n            payload\n          }\n        });\n\n      },\n      searchTitle(e) {\n        const mysearch = e.target.previousSibling.value;\n        for (var i = 0; i < this.books.length; i++) {\n          console.log(this.books[i])\n          if (!this.books[i].title.toLowerCase().includes(mysearch.toLowerCase())) {\n            this.seen = true;\n            Array.from(document.querySelector('.container').children)[i+1].style.display = \"none\";\n          }\n\n        }\n\n      },\n      resetSearch() {\n        this.seen = false;\n        for (var i = 0; i < this.books.length; i++) {\n          Array.from(document.querySelector('.container').children)[i].style.display = \"inline-block\";\n        }\n      }\n\n    }\n\n  };\n\n</script>\n\n<style scoped>\n  .selected {\n    font-weight: bold;\n    display: none;\n    background-color: #ffffff;\n    position: absolute;\n    top: 0;\n    left: 0;\n    opacity: 0.8;\n    z-index: 9999;\n    width: 100%;\n    height: 100%;\n    line-height: 45;\n  }\n\n  .card {\n    width: 20rem;\n    display: inline-table;\n  }\n\n  #secure {\n    background-color: #ffffff;\n    border: 1px solid #cccccc;\n    padding: 20px;\n    margin-top: 10px;\n  }\n\n  .container {\n    display: inline-table;\n\n    width: 100%;\n    margin: 0;\n    padding: 0;\n  }\n\n  .synopsis {\n    height: 150px;\n\n  }\n\n  .resume {\n    font-size: 12px;\n\n\n  }\n\n  .price {\n    font-size: 1.4em;\n    background-color: dodgerblue;\n    margin: 10px;\n  }\n\n  img {\n    width: 100%;\n  }\n\n</style>\n"]}]}